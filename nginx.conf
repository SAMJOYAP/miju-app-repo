server {
  listen 80;

  root /usr/share/nginx/html;
  index index.html;

  # health check (기존)
  location = /healthz {
    add_header Content-Type text/plain;
    return 200 "ok\n";
  }

  # health check (예전에 쓰던 경로 복구)
  location = /check/healthz {
    add_header Content-Type text/plain;
    return 200 "ok\n";
  }

  location = /Check/healthz {
    add_header Content-Type text/plain;
    return 200 "ok\n";
  }

  # version endpoint
  location = /version {
    add_header Content-Type application/json;
    try_files /buildinfo.json =200;
  }

  location / {
    try_files $uri $uri/ /index.html;
  }
}
